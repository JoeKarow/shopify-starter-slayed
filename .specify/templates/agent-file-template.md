# Shopify Performance Optimization Guidelines

Auto-generated from feature implementations. Last updated: [DATE]

## Project Context

- **Theme**: Shopify Dawn-based starter with Vite
- **Performance Target**: LCP < 2.5s, CSS < 250KB, JS < 100KB
- **Build System**: Vite with vite-plugin-shopify
- **Styling**: TailwindCSS v4 with PostCSS directives

## Active Technologies

[EXTRACTED FROM ALL PLAN.MD FILES]

- TypeScript 5.x with decorators
- PostCSS 8.x with custom plugins
- Vite 5.x with HMR
- TailwindCSS v4.1.13
- Alpine.js 3.x
- Liquid templating

## Directive System

```css
/* CSS Directives for automatic splitting */
@split 'template-name'   /* Split into template-specific file */
@critical                /* Extract for inline critical CSS */
@inline 'snippet-name'   /* Generate Liquid snippet */
@responsive 'breakpoint' /* Wrap in media query */
```

## Component Decorators

```typescript
// TypeScript decorators for component loading
@Template('product', 'collection')  // Associate with templates
@LazyLoad({ rootMargin: '50px' })  // Viewport-based loading
@Critical()                         // Load immediately
@NetworkAware('slow-2g')           // Adapt to connection
```

## Project Structure

```
src/
├── css/
│   ├── directives/     # PostCSS directive implementations
│   ├── critical/       # Critical CSS extraction
│   └── templates/      # Template-specific styles
├── js/
│   ├── decorators/     # TypeScript decorators
│   ├── components/     # Alpine.js components
│   └── performance/    # Performance utilities
└── entrypoints/        # Vite entry points

snippets/
├── critical-css-*.liquid  # Auto-generated critical CSS
└── inline-styles-*.liquid # Auto-generated inline styles

assets/
└── [auto-generated by build]
```

## Performance Commands

```bash
# Development
npm run dev              # Start with performance monitoring
npm run analyze          # Bundle size analysis

# Testing
npm run lighthouse       # Run Lighthouse CI
npm run perf:test       # Performance budget tests

# Building
npm run build           # Production build with optimization
npm run build:report    # Build with size report
```

## Shopify Liquid Integration

```liquid
{%- comment -%} Auto-generated critical CSS {%- endcomment -%}
{%- render 'critical-css-[template]' -%}

{%- comment -%} Template-specific styles {%- endcomment -%}
{{ '[template].css' | asset_url | stylesheet_tag: preload: true }}

{%- comment -%} Lazy-loaded components {%- endcomment -%}
<div data-component="[name]" data-lazy="true">
```

## Performance Monitoring

- Real User Metrics (RUM) via Web Vitals
- Synthetic monitoring with Lighthouse CI
- Build-time budget enforcement
- Runtime performance tracking

## Recent Changes

[LAST 3 FEATURES AND THEIR PERFORMANCE IMPACT]

<!-- MANUAL ADDITIONS START -->
<!-- Add project-specific guidelines here -->
<!-- MANUAL ADDITIONS END -->